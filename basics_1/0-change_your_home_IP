#!/usr/bin/env bash
# 0-change_your_home_IP

# Backup the original hosts file
cp /etc/hosts /etc/hosts.bak 2>/dev/null

# Use a temporary file to avoid sed rename issues
tmpfile=$(mktemp)

# Remove old entries for localhost and facebook.com and write to temp file
grep -v -E '^(127\.0\.0\.1|127\.0\.0\.2).*localhost|.*facebook\.com' /etc/hosts > "$tmpfile"

# Append the new entries
echo "127.0.0.2 localhost" >> "$tmpfile"
echo "8.8.8.8 facebook.com" >> "$tmpfile"

# Replace the hosts file
cat "$tmpfile" > /etc/hosts
rm "$tmpfile"
